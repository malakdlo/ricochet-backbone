<html>
  <head>
    <meta charset="utf-8">
    <title>RicochetBackbone</title>
    <meta name="description" content="Ricochet Robots in Backbone">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Dependencies -->
    <script src="node_modules/jquery/dist/jquery.min.js"></script>
    <script src="node_modules/underscore/underscore-min.js"></script>
    <script src="node_modules/backbone/backbone-min.js"></script>
    <script src="node_modules/d3/d3.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" type="text/css" href="node_modules/twitter-bootstrap/docs/assets/css/bootstrap.css">
    <script src="node_modules/twitter-bootstrap/docs/assets/js/bootstrap.min.js">
    </script>

    <!-- Robot CSS -->
    <link rel="stylesheet" type="text/css" href="app/styles/robotStyles.css">
    <link rel="stylesheet" type="text/css" href="app/styles/buttonAndPlayerStyles.css">

    <!-- Vex Dialogs -->
    <script type="text/javascript" src="node_modules/vex-js/js/vex.combined.min.js"></script>
    <script>vex.defaultOptions.className = 'vex-theme-wireframe';</script>
    <link rel="stylesheet" href="node_modules/vex-js/css/vex.css"/>
    <link rel="stylesheet" href="node_modules/vex-js/css/vex-theme-wireframe.css"/>
  </head>
  <body>

    <!-- Backbone Models -->
    <script src="app/scripts/models/quadrantHolderModel.js"></script>
    <script src="app/scripts/models/robotModel.js"></script>
    <script src="app/scripts/models/boardModel.js"></script>
    <script src="app/scripts/models/appModel.js"></script>
    <script src="app/scripts/models/playerModel.js"></script>

    <!-- Backbone Collections -->
    <script src="app/scripts/collections/robots.js"></script>
    <script src="app/scripts/collections/players.js"></script>

    <!-- model issue -->
    <script src="app/scripts/models/scoreModel.js"></script>
    <!-- Backbone View Templates -->
    <script id="boardViewTemplate"type='text/template' >
    <canvas id="boardCanvas" width="<%= boardWidth %>" height="<%= boardWidth %>" style="background: #fff;"></canvas>
    </script>


    <script id='playerViewTemplate' type="text/template">
    <h4>
        <div class='leftText'>
            <strong> 
                <%= username %>
             </strong>
        </div> 
        <div class='rightText' align=right>
            Bid:
            <strong class="pointDisplay"> <%= currentBid.moves %></strong>
            Pts: <strong class="pointDisplay">
            <%= tokensWon.length %>
            </strong>
        </div>
    </h4>
        <div class="bidfield">
            <input type="number" height="25px" class="text-input" name="playerBid-1" placeholder=<%= currentBid.moves %>>
            <button class="btn bid-btn" data-id=<%= cid %> >
                Place Bid
            </button>
        </div>
    </script>

    <script id='scoreViewTemplate'type="text/template">
        <div class='playerBox1'>
            <div class="round-timer">
                <%= timerValue %>
            </div>
            <button type="submit" class="btn btn-positive bid-btn" 
            onClick='Backbone.Events.trigger("nextRound");'>
                New Game
            </button>
            <button type="submit" class="btn btn-positive bid-btn"
            onClick='Backbone.Events.trigger("skipTimer");'>
                Skip Timer
            </button>
            <div> Moves: <%= activeMoves %></div>
            <div> Tokens Left: <%= tokensRemaining.length %></div>

        </div>
    </script>
    <script id='dialogTemplate'type="text/template">

    </script>



    <!-- Backbone Views -->
    <script src="app/scripts/views/appView.js"></script>
    <script src="app/scripts/views/robotView.js"></script>
    <script src="app/scripts/views/boardView.js"></script>
    <script src="app/scripts/views/boardControlsView.js"></script>
    <script src="app/scripts/views/canvasDrawView.js"></script>
    <script src="app/scripts/views/scoreView.js"></script>
    <script src="app/scripts/views/playerView.js"></script>
    <script src="app/scripts/views/playersView.js"></script>

    <script type="text/javascript" src="app/scripts/dialogs/introDialogs.js"></script>
<div class="content_container">
            <div style="float: left;">
              <div id="appView"> </div>
              <div id="credits">
                <a href="//sdtsui.com"><strong>Daniel Tsui</strong></a><br>
                <strong>Original Author     :    Alex Randolph</strong><br>
                <strong>Original Graphics   :  Franz Vohwinkel</strong>

            </div>
            </div>
            <div style="float: left;">
                    <!-- <div id="scoreView" id='playersView' class="scoreHolder"></div> -->
                    <div id="playersView" class="playerHolder"></div>
            </div>
</div>
    

    <script type="text/javascript">
    $(document).on('ready', function(){
        //Instantiate the main appModel instance.
        window.rootModel = new appModel()
        var APPDIV = new appView({
            model: rootModel,
            el: $('#appView')
        });

        //**This can be abstracted back into the backbone model...**
        //Draw on canvas.
        window.boardDetails = new canvasDrawView({
            model: rootModel
        });
        //Add modal here. 
        // Get number of players.
        // TESTING: OFF:
        // 
        // 
        O([APPDIV, boardDetails], rootModel);
        
    });
    </script>

<script type="text/javascript">
//condense this into a clickhandler function to put into boardView eventually,
//makes more sense there than in a random script
$(document).on('ready', function(){
    $(document.body).on('keydown', function(e){
        //only act if there is an active player to win the point...
        if (rootModel.get('scoreModel').get('activePlayer') !== undefined){
            var keyCode = e.keyCode;
            if (e.keyCode === 38){
                Backbone.Events.trigger('keyN');
            } else if (e.keyCode === 40) {
                Backbone.Events.trigger('keyS');
            } else if (e.keyCode === 39) {
                Backbone.Events.trigger('keyE');
            } else if (e.keyCode === 37) {
                Backbone.Events.trigger('keyW');
            } 
        }
    });
})

</script>
  </body>
</html>